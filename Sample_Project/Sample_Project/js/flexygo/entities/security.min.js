var flexygo;!function(flexygo){!function(security){security.getToken=function(tokentype,tenant,callback){let params=[{key:"state",value:flexygo.utils.uniqueUUID()}];tenant&&params.push({key:"tenant",value:tenant}),tokentype&&params.push({key:"tokentype",value:tokentype}),flexygo.nav.openURL(flexygo.utils.resolveUrl("~/Account/AzureAuth"),params),flexygo.events.off(this,"page","closed"),flexygo.events.on(this,"page","closed",()=>{callback(),flexygo.events.off(this,"page","closed")})},security.set=function(el,type,key,item,value,id,key2,key3){let newval=1;"1"!=value&&"true"!=value||(newval=0);let params={SecurityType:type,SecurityKey:key,SecurityKey2:key2,SecurityKey3:key3,SecurityItem:item,SecurityItemValue:String(newval),SecurityId:id};flexygo.ajax.syncPost("~/api/Security","SetSecurity",params,response=>{el.attr("data-value",String(1===newval)),el.find("i:first").removeClass(),el.find("i:first").css("cursor","pointer"),1==newval?el.find("i:first").addClass("flx-icon icon-bool-v"):el.find("i:first").addClass("flx-icon icon-bool-x")})},security.getObjectKey=function(type,key,key2,key3){let params={SecurityType:type,SecurityKey:key,SecurityKey2:key2,SecurityKey3:key3},ret=null;return flexygo.ajax.syncPost("~/api/Security","getObjectKey",params,response=>{ret=response}),ret}}(flexygo.security||(flexygo.security={}))}(flexygo||(flexygo={})),function(flexygo){!function(security){!function(roles){roles.init=function(el){let id=$(el).find("flx-list").attr("id");$("#"+id+">div>div").each((i,e)=>{let dataField=$(e).attr("data-field"),dataKey=$(e).attr("data-key"),dataField2=$(e).attr("data-field2"),dataKey2=$(e).attr("data-key2"),dataField3=$(e).attr("data-field3"),dataKey3=$(e).attr("data-key3"),dataRole=$(e).attr("data-security-id"),dataSecurity=$(e).attr("data-security"),def="'"+dataField+"':'"+dataKey+"','RoleId':'"+dataRole+"'";dataField2&&(def=def+",'"+dataField2+"':'"+dataKey2+"'",dataField3&&(def=def+",'"+dataField3+"':'"+dataKey3+"'")),$(e).children(":first").each((j,f)=>{$(f).css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{let objWhere=flexygo.security.getObjectKey(dataSecurity,dataKey,dataKey2,dataKey3);flexygo.nav.openPage("edit",dataSecurity,objWhere+" and RoleId='"+dataRole+"'","{"+def+"}","popup",!0)})}),$(e).children("[data-element]").each((j,f)=>{$(f).find("i:first").css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{flexygo.security.set($(ev.currentTarget),dataSecurity,dataKey,$(ev.currentTarget).attr("data-element"),$(ev.currentTarget).attr("data-value"),dataRole,dataKey2,dataKey3)})})})}}(security.roles||(security.roles={}))}(flexygo.security||(flexygo.security={}))}(flexygo||(flexygo={})),function(flexygo){!function(security){!function(faculties){faculties.init=function(el){let id=$(el).find("flx-list").attr("id");$("#"+id+">div>div").each((i,e)=>{let dataField=$(e).attr("data-field"),dataKey=$(e).attr("data-key"),dataField2=$(e).attr("data-field2"),dataKey2=$(e).attr("data-key2"),dataField3=$(e).attr("data-field3"),dataKey3=$(e).attr("data-key3"),dataFaculty=$(e).attr("data-security-id"),dataSecurity=$(e).attr("data-security"),def="'"+dataField+"':'"+dataKey+"','FacultyId':'"+dataFaculty+"'";dataField2&&(def=def+",'"+dataField2+"':'"+dataKey2+"'",dataField3&&(def=def+",'"+dataField3+"':'"+dataKey3+"'")),$(e).children(":first").each((j,f)=>{$(f).css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{let objWhere=flexygo.security.getObjectKey(dataSecurity,dataKey,dataKey2,dataKey3);flexygo.nav.openPage("edit",dataSecurity,objWhere+" and FacultyId='"+dataFaculty+"'","{"+def+"}","popup",!0)})}),$(e).children("[data-element]").each((j,f)=>{$(f).find("i:first").css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{flexygo.security.set($(ev.currentTarget),dataSecurity,dataKey,$(ev.currentTarget).attr("data-element"),$(ev.currentTarget).attr("data-value"),dataFaculty,dataKey2,dataKey3)})})})}}(security.faculties||(security.faculties={}))}(flexygo.security||(flexygo.security={}))}(flexygo||(flexygo={})),function(flexygo){!function(security){!function(users){users.init=function(el){let id=$(el).find("flx-list").attr("id");$("#"+id+">div>div").each((i,e)=>{let dataField=$(e).attr("data-field"),dataKey=$(e).attr("data-key"),dataField2=$(e).attr("data-field2"),dataKey2=$(e).attr("data-key2"),dataField3=$(e).attr("data-field3"),dataKey3=$(e).attr("data-key3"),dataUser=$(e).attr("data-security-id"),dataSecurity=$(e).attr("data-security"),def="'"+dataField+"':'"+dataKey+"','UserId':'"+dataUser+"'";dataField2&&(def=def+",'"+dataField2+"':'"+dataKey2+"'",dataField3&&(def=def+",'"+dataField3+"':'"+dataKey3+"'")),$(e).children(":first").each((j,f)=>{$(f).css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{let objWhere=flexygo.security.getObjectKey(dataSecurity,dataKey,dataKey2,dataKey3);flexygo.nav.openPage("edit",dataSecurity,objWhere+" and UserId='"+dataUser+"'","{"+def+"}","popup",!0)})}),$(e).children("[data-element]").each((j,f)=>{$(f).find("i:first").css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{flexygo.security.set($(ev.currentTarget),dataSecurity,dataKey,$(ev.currentTarget).attr("data-element"),$(ev.currentTarget).attr("data-value"),dataUser,dataKey2,dataKey3)})})})}}(security.users||(security.users={}))}(flexygo.security||(flexygo.security={}))}(flexygo||(flexygo={})),function(flexygo){!function(security){!function(webapi){webapi.init=function(el){$(el).find("flx-list [data-security]").each((i,e)=>{$(e).children("[data-element]").each((j,f)=>{$(f).find("i:first").css("cursor","pointer"),$(f).off(),$(f).on("click",ev=>{let parentDiv=$(f).closest("[data-security]"),currentDiv=$(ev.currentTarget),dataSecurity=parentDiv.attr("data-security"),dataKey=parentDiv.attr("data-key"),dataKeyField=parentDiv.attr("data-key-field"),dataKey2=parentDiv.attr("data-key2"),dataKey2Field=parentDiv.attr("data-key2-field"),objectwhere="";objectwhere+=dataKeyField+"='"+dataKey+"'",dataKey2Field&&(objectwhere+=" and "+dataKey2Field+"='"+dataKey2+"'");let dataElement=currentDiv.attr("data-element"),obj=new flexygo.obj.Entity(dataSecurity,objectwhere);obj.read(),obj.data[dataKeyField].Value=dataKey,dataKey2Field&&(obj.data[dataKey2Field].Value=dataKey2),obj.data[dataElement].Value?obj.data[dataElement].Value=!1:obj.data[dataElement].Value=!0,obj.update()&&currentDiv.find("i").attr("class","flx-icon icon-bool-"+(obj.data[dataElement].Value?"v":"x"))})})})}}(security.webapi||(security.webapi={}))}(flexygo.security||(flexygo.security={}))}(flexygo||(flexygo={}));
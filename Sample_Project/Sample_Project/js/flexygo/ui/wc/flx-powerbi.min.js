var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxPowerBIElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.reportName=null}connectedCallback(){let element=$(this);this.reportName=element.attr("reportname"),this.connected=!0,this.init()}static get observedAttributes(){return["reportname"]}attributeChangedCallback(attrName,oldVal,newVal){this.connected&&"reportname"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.reportName=newVal,this.reportName&&this.refresh())}refresh(){"true"!=$(this).attr("manualInit")&&this.init()}init(){0==$('script[ID="jspowerbi"]').length&&$("head").append('<script ID="jspowerbi" src="./js/plugins/powerbi/powerbi.min.js"><\/script>');let me=$(this);me.removeAttr("manualInit"),me.empty(),this.render()}render(){$(this).append($('<div class="powerbi"></div>')),this.startLoading();let p=new flexygo.Process("GetPowerBISettings",""),params=new Array;params.push({Key:"ReportName",Value:this.reportName}),p.run(params,ret=>{this.loadReport(ret.Data.Token,ret.Data.Url,ret.Data.Id),this.stopLoading()})}loadReport(accessToken,embedUrl,embedReportId){let me=$(this),models=window["powerbi-client"].models,tokenType=models.TokenType.Embed,permissions=models.Permissions.All,config={type:"report",tokenType:"0"==tokenType?models.TokenType.Aad:models.TokenType.Embed,accessToken,embedUrl,id:embedReportId,permissions,settings:{filterPaneEnabled:!0,navContentPaneEnabled:!0}};var embedContainer=me.find(".powerbi")[0];powerbi.embed(embedContainer,config)}startLoading(){$(this).parents("flx-module").length>0&&$(this).parents("flx-module")[0].startLoading()}stopLoading(){$(this).parents("flx-module").length>0&&$(this).parents("flx-module")[0].stopLoading()}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-powerbi",flexygo.ui.wc.FlxPowerBIElement);
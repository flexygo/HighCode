var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxOfflineEmulator=class extends HTMLElement{constructor(){super(),this.connected=!1,this.ionicMode="md",this.iframeLoaded=!1}static get observedAttributes(){return["ModuleName","url","mode"]}init(){this.render()}refresh(){this.ionicWindow.postMessage({action:"reload"},"*")}refreshpages(){this.ionicWindow.postMessage({action:"syncTemplates"},"*")}render(){this.url?($(this).html([this.renderModeToggle(),this.renderDevice(),this.renderHelpOptions()].join("")),this.setMainEvents()):flexygo.msg.warning("The emulator needs the url attribute")}renderModeToggle(){return`<div class="mode-toggle" active-mode="${this.ionicMode}">\n                    <div class="toggle-group">\n                        ${[{mode:"ios",icon:"fa fa-apple"},{mode:"md",icon:"fa fa-android"}].map(platform=>`<button\n                                ${platform.mode===this.ionicMode?'class= "rippled"':""}\n                                data-toggle="tooltip" \n                                title="${flexygo.localization.translate("offlineemulator."+platform.mode)}"\n                                mode="${platform.mode}">\n                                    <i class="${platform.icon}"/>\n                            </button>`).join("")}\n                    </div>\n                  </div>`}renderDevice(){return`<div class="device" mode="${this.ionicMode}">\n                    <figure>\n                      <svg class="device__md-bar" viewBox="0 0 1384.3 40.3">\n                        <path class="st0" d="M1343 5l18.8 32.3c.8 1.3 2.7 1.3 3.5 0L1384 5c.8-1.3-.2-3-1.7-3h-37.6c-1.5 0-2.5 1.7-1.7 3z"/>\n                        <circle class="st0" cx="1299" cy="20.2" r="20"/>\n                        <path class="st0" d="M1213 1.2h30c2.2 0 4 1.8 4 4v30c0 2.2-1.8 4-4 4h-30c-2.2 0-4-1.8-4-4v-30c0-2.3 1.8-4 4-4zM16 4.2h64c8.8 0 16 7.2 16 16s-7.2 16-16 16H16c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/>\n                      </svg>\n                      <svg class="device__ios-notch" viewBox="0 0 219 31">\n                        <path d="M0 1V0h219v1a5 5 0 0 0-5 5v3c0 12.15-9.85 22-22 22H27C14.85 31 5 21.15 5 9V6a5 5 0 0 0-5-5z" fill-rule="evenodd"/>\n                      </svg>\n                      <iframe\n                        loading="lazy"\n                        importance="low"\n                        src="${this.buildUrl()}"/>\n                    </figure>\n                  </div>`}renderHelpOptions(){return'<div class="help-options">\n                   <i data-action="refreshpages" class="flx-icon icon-refresh" data-toggle="tooltip" data-placement="bottom" title="Refresh"/>\n                   <i data-action="externalemulator" class="flx-icon icon-new-link" data-toggle="tooltip" data-placement="bottom" title="External emulator"/>\n                  </div>'}setMainEvents(){$(this).find(".device>figure>iframe").off("load.offline-emulator").on("load.offline-emulator",e=>{this.iframeLoaded=!0,this.ionicWindow=e.currentTarget.contentWindow}),$(this).find(".mode-toggle>.toggle-group>button").off("click.offline-emulator").on("click.offline-emulator",e=>{this.ionicMode!==e.currentTarget.getAttribute("mode")&&(this.setAttribute("mode",e.currentTarget.getAttribute("mode")),setTimeout(()=>{$(this).find(".mode-toggle>.toggle-group>button").removeClass("rippled").filter(`[mode="${e.currentTarget.getAttribute("mode")}"]`).addClass("rippled")},500))}).hover(e=>{e.currentTarget.getAttribute("mode")!==this.ionicMode&&$(this).find(".mode-toggle>.toggle-group").addClass("chage-mode")},e=>{$(this).find(".mode-toggle>.toggle-group").removeClass("chage-mode")}),$(this).find(".help-options>[data-action]").off("click.offline-emulator").on("click.offline-emulator",e=>{switch($(e.currentTarget).attr("data-action")){case"refreshpages":this.refreshpages();break;case"externalemulator":window.open(this.buildUrl())}}),$(this).find('[data-toggle="tooltip"]').tooltip({container:"body",trigger:"hover",delay:{show:600,hide:0}})}changeUrl(){$(this).find(".device>figure>iframe").attr("src",this.buildUrl())}changeMode(){$(this).find(".mode-toggle").attr("active-mode",this.ionicMode),$(this).find(".device").attr("mode",this.ionicMode),$(this).find(".device>figure>iframe").attr("src",this.buildUrl()),$(this).find(".mode-toggle>.toggle-group").removeClass("chage-mode")}buildUrl(){return`${this.url}?ionic:mode=${this.ionicMode}`}connectedCallback(){let element=$(this);this.connected=!0,this.moduleName=element.attr("modulename"),this.url=element.attr("url"),element.attr("mode",this.ionicMode),this.init()}attributeChangedCallback(attrName,oldVal,newVal){let needInit=!1;"modulename"==attrName.toLowerCase()&&newVal&&""!=newVal?(this.moduleName=newVal,needInit=!0):"url"==attrName.toLowerCase()&&newVal&&""!=newVal?(this.url=newVal,this.connected&&this.changeUrl()):"mode"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.ionicMode=newVal,this.connected&&this.changeMode()),this.connected&&needInit&&this.init()}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-offline-emulator",flexygo.ui.wc.FlxOfflineEmulator);
var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxToolTipElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.objectName="",this.objectWhere="",this.templateId="",this.container="",this.helpId="",this.desktopOnly=!1,this.opened=!1,this.elementid=""}connectedCallback(){let me=$(this);this.connected=!0,this.objectName=me.attr("objectname"),this.objectWhere=me.attr("objectwhere"),this.templateId=me.attr("templateid"),this.placement=me.attr("placement"),this.container=me.attr("container"),this.helpId=me.attr("helpid"),this.mode=me.attr("mode")||"",0==this.mode.length&&(this.mode="tooltip"),me.attr("desktoponly")&&"true"==me.attr("desktoponly").toLocaleLowerCase()&&(this.desktopOnly=!0),this.innerContent=me.html(),me.html(""),this.init()}disconnectedCallback(){!0===this.opened&&$("#"+this.pop.attr("aria-describedby")).remove()}static get observedAttributes(){return["objectname","objectwhere","templateid","placement","container","mode","helpId"]}attributeChangedCallback(attrName,oldVal,newVal){if(!this.connected)return;let isDirty=!1;switch(attrName){case"objectname":this.objectName!==newVal&&(this.objectName=newVal,isDirty=!0);break;case"objectwhere":this.objectWhere!==newVal&&(this.objectWhere=newVal,isDirty=!0);break;case"templateid":this.templateId!==newVal&&(this.templateId=newVal,isDirty=!0);break;case"placement":this.placement!==newVal&&(this.placement=newVal,isDirty=!0);break;case"container":this.container!==newVal&&(this.container=newVal,isDirty=!0);break;case"mode":this.mode!==newVal&&(this.mode=newVal,isDirty=!0);break;case"helpId":this.helpId!==newVal&&(this.helpId=newVal,isDirty=!0)}!0===isDirty&&this.refresh()}init(){this.refresh()}refresh(){if(1==this.desktopOnly&&flexygo.utils.isSizeMobile())return;let parent=$(this).parent(),content=null,trigger="tooltip"===this.mode?"hover":"manual";this.hasObjectTemplate=this.objectName&&this.objectName.length>0&&this.objectWhere&&this.objectWhere.length>0&&this.templateId&&this.templateId.length>0;let placement=this.placement&&this.placement.length>0?this.placement:"auto",container=!!(this.container&&this.container.length>0)&&this.container;this.pop=parent.popover({title:null,html:!0,placement,content:flexygo.utils.loadingMsg(),trigger,container}).on("show.bs.popover",e=>{$("flx-tooltip").each((i,e)=>{e===this?(content||(content=this.helpId?flexygo.nav.getHelpContent(this.helpId):this.hasObjectTemplate?flexygo.environment.getTemplate(this.objectName,this.objectWhere,this.templateId):this.innerContent),content?this.pop.attr("data-content",content):e.pop.popover("hide")):!0===e.opened&&e.pop.popover("hide")})}).on("shown.bs.popover",e=>{this.elementid=$(e.target).attr("aria-describedby"),"popover"===this.mode&&$(document).on("click.flxtooltip."+this.elementid,e=>{let tt=$(e.target).closest(".popover");tt.length>0&&tt.first().attr("id")==this.elementid||($(document).off("click.flxtooltip."+this.elementid),this.pop.popover("hide"),this.opened=!1)})}).on("hide.bs.popover",e=>{this.opened=!1}),"hover"===trigger?parent.on("mouseover.flxtooltip",()=>{!1===this.opened&&(this.opened=!0,this.pop.popover("show"))}):parent.on("click.flxtooltip",()=>{!1===this.opened&&(this.opened=!0,this.pop.popover("show"))})}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-tooltip",flexygo.ui.wc.FlxToolTipElement);
var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxMailNotificationElement=class extends HTMLElement{constructor(){super()}connectedCallback(){this.init()}disconnectedCallback(){flexygo.events.off(this,"push","notify")}static get observedAttributes(){return[]}attributeChangedCallback(attrName,oldVal,newVal){}init(){this.refresh(),flexygo.events.on(this,"push","notify",function(e){"updateMailNotice"==e.masterIdentity&&void 0!==e.sender.pendingMails?(this.updateBadge(e.sender.pendingMails,!0),$("flx-maillist").length>0&&$("flx-maillist")[0].refresh()):"finishMailSync"==e.masterIdentity&&$("flx-maillist").length>0&&(e.sender.success?$("flx-maillist").find("[folderid='"+e.detailIdentity+"']").find("i").addClass("hide"):$("flx-maillist").find("[folderid='"+e.detailIdentity+"']").find("i").removeClass("flx-icon icon-sincronize-1 icon-spin txt-outstanding hide").addClass("flx-icon icon-error1 txt-danger"))})}refresh(){let ctx=$(this),notySpan=$('<span class=""> <i class="flx-icon icon-email-1 "></i> <b id="notifyMails" class="badge  bounceIn animated"></b> </span>');ctx.append(notySpan),notySpan.on("click",()=>{flexygo.nav.openPageName("syspage-mailimaplist","","",null,"current",!1,$(this))}),this.refreshBadge()}refreshBadge(){$("#notifyBadge")&&flexygo.ajax.post("~/api/Mail","GetMailBadgeValue",null,response=>{this.updateBadge(response,!1)})}updateBadge(pendingMails,sound){var currentMails=$("#notifyMails").html();if(currentMails&&""!=currentMails||(currentMails="0"),pendingMails>parseInt(currentMails)){var snd=new Audio(flexygo.utils.resolveUrl("~/js/plugins/lobibox-master/sounds/sound1.ogg"));flexygo.utils.testMode||snd.play()}0==pendingMails?$("#notifyMails").html(""):$("#notifyMails").html(pendingMails.toString())}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-mailnotification",flexygo.ui.wc.FlxMailNotificationElement);
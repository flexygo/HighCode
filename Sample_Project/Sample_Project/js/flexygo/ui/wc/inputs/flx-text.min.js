var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxTextElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.type="text",this.property=null,this.options=null,this.value=null}connectedCallback(){let element=$(this);this.connected=!0;let isFilter=!1;this.type=element.attr("type")||"text";let propName=element.attr("property");if(propName&&flexygo.utils.isBlank(this.options)){let parentCtl=element.closest("flx-edit,flx-list,flx-propertymanager,flx-view,flx-filter");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];if(parentCtl.is("flx-filter")){let objName=element.attr("object");this.options=jQuery.extend(!0,{},wcParent.properties[objName+"-"+propName]),isFilter=!0,Object.defineProperty(this.options,"Hide",{enumerable:!0,configurable:!1,writable:!1,value:!1})}else this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=propName}void 0!==element.attr("Required")&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequired=!0),void 0!==element.attr("Disabled")&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Locked=!0);let RequiredMessage=element.attr("RequiredMessage");RequiredMessage&&""!==RequiredMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequiredMessage=RequiredMessage);let Mask=element.attr("Mask");Mask&&""!==Mask&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Mask=Mask);let Style=element.attr("Style");Style&&""!==Style&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=Style,element.attr("Control-Style",this.options.Style),element.attr("Style",""));let Class=element.attr("Class");Class&&""!==Class&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=Class,element.attr("Control-Class",this.options.CssClass),element.attr("Class",""));let DecimalPlaces=element.attr("DecimalPlaces");DecimalPlaces&&""!==DecimalPlaces&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=parseInt(DecimalPlaces));let MaxNumOfChars=element.attr("MaxNumOfChars");MaxNumOfChars&&""!==MaxNumOfChars&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxNumOfChars=parseInt(MaxNumOfChars));let MinValue=element.attr("MinValue");MinValue&&""!==MinValue&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValue=parseInt(MinValue));let MaxValue=element.attr("MaxValue");MaxValue&&""!==MaxValue&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValue=parseInt(MaxValue));let MaxValueMessage=element.attr("MaxValueMessage");MaxValueMessage&&""!==MaxValueMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValueMessage=MaxValueMessage);let MinValueMessage=element.attr("MinValueMessage");MinValueMessage&&""!==MinValueMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValueMessage=MinValueMessage);let RegExp=element.attr("RegExp");RegExp&&""!==RegExp&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExp=RegExp);let RegExpText=element.attr("RegExpText");RegExpText&&""!==RegExpText&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExpText=RegExpText);let PlaceHolder=element.attr("PlaceHolder");PlaceHolder&&""!==PlaceHolder&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.PlaceHolder=PlaceHolder);let IconClass=element.attr("IconClass");IconClass&&""!==IconClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=IconClass);let HelpId=element.attr("HelpId");HelpId&&""!==HelpId&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=HelpId);let AllowNewFunction=element.attr("AllowNewFunction");AllowNewFunction&&""!==AllowNewFunction&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewFunction=AllowNewFunction);let AllowNewObject=element.attr("AllowNewObject");AllowNewObject&&""!==AllowNewObject&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewObject=AllowNewObject);let ctlClass=element.attr("Control-Class");ctlClass&&""!==ctlClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=ctlClass);let ctlStyle=element.attr("Control-Style");ctlStyle&&""!==ctlStyle&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=ctlStyle);let Hide=element.attr("Hide");!isFilter&&Hide&&""!==Hide&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide="true"==Hide);let Tag=element.attr("Tag");Tag&&""!==Tag&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Tag=Tag),this.init();let Value=element.attr("Value");Value&&""!==Value&&this.setValue(Value)}static get observedAttributes(){return["type","property","required","disabled","requiredmessage","mask","style","class","decimalplaces","minvalue","maxvalue","maxvaluemessage","minvaluemessage","regexp","regexptext","placeholder","iconclass","helpid","allownewfunction","allownewobject","hide","tag"]}attributeChangedCallback(attrName,oldVal,newVal){let element=$(this);if(this.connected){if("type"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.type=newVal,this.refresh()),"property"===attrName.toLowerCase()&&newVal&&""!==newVal){let propName=newVal,parentCtl=element.closest("flx-edit, flx-filter, flx-list,flx-propertymanager");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];if(parentCtl.is("flx-filter")){let objName=element.attr("object");this.options=jQuery.extend(!0,{},wcParent.properties[objName+"-"+propName])}else this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=newVal,this.refresh()}"required"===attrName.toLowerCase()&&(this.options||(this.options=new flexygo.api.ObjectProperty),void 0!==element.attr("required")?this.options.IsRequired=!0:this.options.IsRequired=!1,element.find("input").prop("required",this.options.IsRequired)),"disabled"===attrName.toLowerCase()&&(this.options||(this.options=new flexygo.api.ObjectProperty),void 0!==element.attr("disabled")?this.options.Locked=!0:this.options.Locked=!1,element.find("input").prop("disabled",this.options.Locked)),"requiredmessage"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequiredMessage=newVal,this.refresh()),"mask"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Mask=newVal,this.refresh()),"style"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=newVal,element.attr("Control-Style")!==this.options.Style&&(element.attr("Control-Style",this.options.Style),element.attr("Style",""),this.refresh())),"class"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=newVal,element.attr("Control-Class")!==this.options.CssClass&&(element.attr("Control-Class",this.options.CssClass),element.attr("Class",""),this.refresh())),"decimalplaces"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=newVal,this.refresh()),"minvalue"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValue=newVal,this.refresh()),"maxvalue"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValue=newVal,this.refresh()),"maxvaluemessage"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValueMessage=newVal,this.refresh()),"minvaluemessage"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValueMessage=newVal,this.refresh()),"regexp"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExp=newVal,this.refresh()),"regexptext"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExpText=newVal,this.refresh()),"placeholder"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.PlaceHolder=newVal,this.refresh()),"iconclass"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=newVal,this.refresh()),"helpid"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=newVal,this.refresh()),"allownewfunction"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewFunction=newVal,this.refresh()),"allownewobject"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewObject=newVal,this.refresh()),"hide"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide=newVal,this.refresh()),"tag"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Tag=newVal,this.refresh())}}refresh(){let val=this.getValue();this.init(),val&&""!==val&&this.setValue(val)}init(){let me=$(this);me.attr("mode")&&"view"===me.attr("mode").toLowerCase()?this.initViewMode():this.initEditMode()}initViewMode(){let iconsLeft,iconsRight,me=$(this);if(this.options&&this.options.ObjNameLink&&this.options.ObjWhereLink){let editCtl=me.closest("flx-view")[0];iconsRight=$('<div class="input-group-btn" />');let icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-link" /></button>').on("click",e=>{flexygo.nav.openPage("view",editCtl.parseEditString(this.options.ObjNameLink),editCtl.parseEditString(this.options.ObjWhereLink),null,this.options.TargetIdLink)});iconsRight.append(icon1)}let control=$("<div>");me.html(control);let input=$('<label class="form-control input-view" />');this.options&&this.options.IconClass&&""!==this.options.IconClass&&(iconsLeft=$('<span class="input-group-addon" ><i class="'+this.options.IconClass+'" /></span>'),control.append(iconsLeft)),control.append(input),"url"===this.type.toLowerCase()&&(this.setUrlLink(),this.options&&!this.options.PlaceHolder&&(this.options.PlaceHolder="http://...")),iconsRight&&control.append(iconsRight),(iconsLeft||iconsRight&&iconsRight.length>0)&&control.addClass("input-group"),this.options&&this.options.Style&&me.children("div").attr("style",this.options.Style),this.options&&this.options.CssClass&&me.children("div").addClass(this.options.CssClass),this.options&&this.options.Hide&&me.addClass("hideControl")}initEditMode(){let iconsLeft,input,me=$(this),iconsRight=this.getIconButtons(),control=$("<div>");(input="date"===this.type&&""!==this.options.PlaceHolder?$('<input type="text" onfocus="(this.type=\'date\')" class="form-control" />'):"cron"===this.type||"ident"===this.type||"map"===this.type?$('<input type="text" class="form-control" />'):this.options&&this.options.MaxNumOfChars&&this.options.MaxNumOfChars>0?$('<input type="'+this.type+'" class="form-control"  maxLength="'+this.options.MaxNumOfChars+'"/>'):$('<input type="'+this.type+'" class="form-control" />')).on("blur",e=>{me.trigger("blur")}),"ident"===this.type&&input.on("keyup",function(evt){this.value=this.value.replace(/á/g,"a"),this.value=this.value.replace(/é/g,"e"),this.value=this.value.replace(/í/g,"i"),this.value=this.value.replace(/ó/g,"o"),this.value=this.value.replace(/ú/g,"u"),this.value=this.value.replace(/ñ/g,"n"),this.value=this.value.replace(/ç/g,"c"),this.value=this.value.replace(/Á/g,"A"),this.value=this.value.replace(/É/g,"E"),this.value=this.value.replace(/Í/g,"I"),this.value=this.value.replace(/Ó/g,"O"),this.value=this.value.replace(/Ú/g,"U"),this.value=this.value.replace(/Ñ/g,"N"),this.value=this.value.replace(/Ç/g,"C"),this.value=this.value.replace(/ /g,"_"),this.value=this.value.replace(/[^a-zA-Z0-9_\\-]/g,"")}),this.options&&this.options.IconClass&&""!==this.options.IconClass&&(iconsLeft=$('<span class="input-group-addon" ><i class="'+this.options.IconClass+'" /></span>')),iconsLeft&&control.append(iconsLeft),control.append(input),iconsRight&&iconsRight.length>0&&control.append(iconsRight),(iconsLeft||iconsRight&&iconsRight.length>0)&&control.addClass("input-group"),me.html(control),"url"===this.type.toLowerCase()&&(this.setUrlLink(),this.options&&!this.options.PlaceHolder&&(this.options.PlaceHolder="http://...")),this.setOptions()}setUrlLink(){let me,control,btnURLlink;control=(me=$(this)).find("div").addClass("input-group"),(btnURLlink=$('<button class="btn btn-default" type="button"><i class="fa fa-external-link" /></button>').appendTo($('<div class="input-group-btn"/>').appendTo(control))).off("click").on("click",()=>{window.open(this.getValue())})}getIconButtons(){let icon1,ret=$('<div class="input-group-btn" />'),editCtl=$(this).closest("flx-edit, flx-list")[0],parseEdit=function(val,ctx){return val};if(editCtl&&editCtl.parseEditString&&(parseEdit=editCtl.parseEditString),this.options&&(this.options.SearchCollection||this.options.SearchFunction)&&(icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-search" /></button>').on("click",e=>{this.options.SearchFunction&&flexygo.utils.execDynamicCode.call(this,parseEdit(this.options.SearchFunction,editCtl)),this.options.SearchCollection&&""!==this.options.SearchCollection&&(flexygo.events.on(this,"entity","selected",e=>{flexygo.events.off(this,"entity","selected");let entity=e.sender,config=entity.getConfig(),value=entity.data[config.KeyFields[0]].Value;this.options.SearchReturnFields&&""!==this.options.SearchReturnFields&&(value=entity.data[this.options.SearchReturnFields].Value),this.setValue(value),this.triggerDependencies(),$(document).find('flx-search[objectname="'+this.options.SearchCollection+'"]').closest(".ui-dialog").remove()}),flexygo.nav.openPage("search",parseEdit(this.options.SearchCollection,editCtl),parseEdit(this.options.SearchWhere,editCtl),null,"popup"))}),ret.append(icon1)),this.options&&this.options.ObjNameLink&&this.options.ObjWhereLink&&(icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-link" /></button>').on("click",e=>{flexygo.nav.openPage("view",parseEdit(this.options.ObjNameLink,editCtl),editCtl.parseEditString(this.options.ObjWhereLink),null,this.options.TargetIdLink)}),ret.append(icon1)),this.options&&(this.options.AllowNewFunction||this.options.AllowNewObject)&&!this.options.Locked&&(icon1=$('<button class="btn btn-default" type="button"><i class="fa fa-plus" /></button>').on("click",e=>{this.options.AllowNewFunction?flexygo.utils.execDynamicCode.call(this,parseEdit(this.options.AllowNewFunction,editCtl)):this.options.AllowNewObject&&""!==this.options.AllowNewObject&&(flexygo.events.on(this,"entity","inserted",e=>{if(this.options.AllowNewObject===e.masterIdentity){flexygo.events.off(this,"entity","inserted");let value,entity=e.sender;if(this.options.AllowNewReturnFields&&""!=this.options.AllowNewReturnFields)value=entity.data[this.options.AllowNewReturnFields].Value;else{var config=e.sender.getConfig();value=entity.data[config.KeyFields[0]].Value}this.setValue(value),flexygo.nav.closePage($(document).find('flx-edit[objectname="'+this.options.AllowNewObject+'"]'))}}),flexygo.nav.openPage("edit",parseEdit(this.options.AllowNewObject,editCtl),null,null,"modal"))}),ret.append(icon1)),"cron"==this.type)icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-timer" /></button>').on("click",e=>{this.showCronGenerator($(e.currentTarget))}),ret.append(icon1);else if("map"==this.type){var Tag="";this.options&&""!=this.options.Tag&&(Tag=this.options.Tag),icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-map-pointer " /></button>').on("click",e=>{this.showCoordGenerator($(e.currentTarget),Tag)}),ret.append(icon1)}return""===ret.html()?null:ret}showCronGenerator(itm){let input=$(this).find("input");itm.popover("show"),itm.data("bs.popover").options.content='<div class="cronExpression inline" onclick="" ></div><div class="icon-margin-left btn-group"><button class="acpt btn btn-default" onclick=""><i class="flx-icon icon-checked"></i></button><button class="cncl btn btn-default" onclick=""><i class="flx-icon icon-remove"></i></button></div>',itm.data("bs.popover").options.html=!0,itm.popover("show"),itm.parent().find(".popover-content").on("click",function(ev){ev.stopPropagation(),ev.preventDefault()}),itm.parent().find(".cronExpression").jqCron({enabled_minute:!0,multiple_dom:!0,multiple_month:!0,multiple_mins:!0,multiple_dow:!0,multiple_time_hours:!0,multiple_time_minutes:!0,default_period:"week",no_reset_button:!0,lang:"en"}),itm.parent().find("button.cncl").on("click",function(ev){itm.popover("destroy"),ev.stopPropagation(),ev.preventDefault()}),itm.parent().find("button.acpt").on("click",function(ev){input.val(itm.parent().find(".cronExpression").data("jqCron").getCron()),itm.popover("destroy"),ev.stopPropagation(),ev.preventDefault()})}showCoordGenerator(itm,tag){let input=$(this).find("input"),histObj=new flexygo.nav.FlexygoHistory;histObj.targetid="modal1024x800";let modal=flexygo.targets.createContainer(histObj,!0,null,!0);modal.empty(),modal.closest(".ui-dialog").find(".ui-dialog-title").html(flexygo.localization.translate("text.map")),modal.addClass("nopadding");let marker=input.val(),lat="",lng="";var latField="",lngField="";if(""!=tag&&""!=marker){var tagArr=tag.split("|");latField=tagArr[0],lngField=tagArr[1],""!=latField&&""!=lngField&&""==lat&&""==lng&&(lat=$('flx-text[property =  "'+latField+'"]').val(),lng=$('flx-text[property =  "'+lngField+'"]').val().replace(" ",""),modal.append('<input class="srch"  style="width:94.5%;" type="text" placeholder="Search adress"/><button class="srch btn btn-default" type="button" > <i class="flx-icon icon-search " /></button><button class="acpt btn btn-default" type="button" ><i class="flx-icon icon-save-2"/></button><flx-map cluster="false" mode="coord" zoom="3" width="auto" height="96%"><marker lat="'+lat+'" lng="'+lng+'"></marker></flx-map>'))}else""!=marker?(lat=(marker=marker.split(","))[0],lng=marker[1].replace(" ",""),modal.append('<input class="srch"  style="width:94.5%;" type="text" placeholder="Search adress"/><button class="srch btn btn-default" type="button" > <i class="flx-icon icon-search " /></button><button class="acpt btn btn-default" type="button" ><i class="flx-icon icon-save-2"/></button><flx-map cluster="false" mode="coord" zoom="3" width="auto" height="96%"><marker lat="'+lat+'" lng="'+lng+'"></marker></flx-map>')):modal.append('<input class="srch"  style="width:94.5%;" type="text" placeholder="Search adress"/><button class="srch btn btn-default" type="button" > <i class="flx-icon icon-search" /></button><button class="acpt btn btn-default" type="button" > <i class="flx-icon icon-save-2"/></button><flx-map cluster="false" mode="coord" zoom="3" width="auto" height="96%"></flx-map>');modal.find("button.acpt").on("click",function(ev){var coordinate="",lat="",lng="",latField="",lngField="",mapbt=modal.find("flx-map")[0];if(null!=mapbt.lat||null!=mapbt.lng?coordinate=mapbt.lat+", "+mapbt.lng:null==$(mapbt).attr("lat")&&null==$(mapbt).attr("lng")||(coordinate=$(mapbt).attr("lat")+", "+$(mapbt).attr("lng")),""!=tag&&""!=coordinate){var coordinateArr=coordinate.split(",");lat=coordinateArr[0],lng=coordinateArr[1].replace(" ","");var tagArr=tag.split("|");latField=tagArr[0],lngField=tagArr[1]}input.val(coordinate),""!=latField&&""!=lngField&&""!=lat&&""!=lng&&($('flx-text[property =  "'+latField+'"]').val(lat),$('flx-text[property =  "'+lngField+'"]').val(lng)),modal.closest(".ui-dialog").find(".ui-dialog-titlebar-close").click()}),modal.find("input.srch").on("keydown",function(ev){if(13===ev.keyCode){var address=$(this).parent().find("input.srch").val();""!=address&&($("flx-map").remove(),modal.append('<flx-map cluster="false" mode="coord" zoom="3" width="auto" height="96%"><marker address="'+address+'"></marker></flx-map>'))}}),modal.find("button.srch").on("click",function(ev){var address=$(this).parent().find("input.srch").val();""!=address&&($("flx-map").remove(),modal.append('<flx-map cluster="false" mode="coord" zoom="3" width="auto" height="96%"><marker address="'+address+'"></marker></flx-map>'))})}setOptions(){let me=$(this),input=me.find("input");if(input.on("change.refreshvalue",e=>{me.attr("value",input.val())}),this.options&&this.options.Name&&""!==this.options.Name?input.attr("name",this.options.Name):input.attr("name",flexygo.utils.uniqueName()),me.attr("tab")&&""!==me.attr("tab")&&input.attr("tabindex",me.attr("tab")),this.options&&this.options.Locked&&input.prop("disabled",this.options.Locked),this.options&&this.options.PlaceHolder&&input.attr("PlaceHolder",this.options.PlaceHolder),this.options&&this.options.Style&&me.children("div").attr("style",this.options.Style),this.options&&this.options.CssClass&&me.children("div").addClass(this.options.CssClass),this.options&&this.options.IsRequired&&input.prop("required",this.options.IsRequired),this.options&&this.options.IsRequiredMessage&&input.attr("data-msg-required",this.options.IsRequiredMessage),this.options&&this.options.Mask&&(input.mask(this.options.Mask),input.on("paste",function(){$(this).val("")})),this.options&&this.options.CauseRefresh&&input.on("change",e=>{let ev={class:"property",type:"changed",sender:this,masterIdentity:this.property};"date"===this.type?(null==this.getValue()||this.getValue().getFullYear()>=1900&&this.getValue().getFullYear()<=2079)&&flexygo.events.trigger(ev):flexygo.events.trigger(ev)}),this.options&&this.options.DecimalPlaces&&""!==this.options.DecimalPlaces.toString()&&this.options.DecimalPlaces>0){let step="0.";for(let i=1;i<=this.options.DecimalPlaces;i++)i===this.options.DecimalPlaces?step+="1":step+="0";input.attr("step",step),input.on("change",e=>{$.isNumeric(this.getValue())&&this.setValue(parseFloat(this.getValue()).toFixed(this.options.DecimalPlaces))})}this.options&&this.options.MinValue&&""!==this.options.MinValue.toString()&&input.attr("min",this.options.MinValue),this.options&&this.options.MaxValue&&""!==this.options.MaxValue.toString()&&input.attr("max",this.options.MaxValue),this.options&&this.options.MinValueMessage&&""!==this.options.MinValueMessage&&input.attr("data-msg-min",this.options.MinValueMessage),this.options&&this.options.MaxValueMessage&&""!==this.options.MaxValueMessage&&input.attr("data-msg-max",this.options.MaxValueMessage),this.options&&this.options.RegExp&&""!==this.options.RegExp&&input.attr("regex",this.options.RegExp),this.options&&this.options.RegExpText&&""!==this.options.RegExpText&&input.attr("data-msg-regex",this.options.RegExpText),this.options&&this.options.Hide&&me.addClass("hideControl"),input.attr("autocomplete","off")}setValue(value){let me=$(this);if(me.attr("mode")&&"view"===me.attr("mode").toLowerCase())this.setValueView(value),me.attr("value",value);else{let input=me.find("input");"date"===this.type&&null!==value?(input.attr("type","date"),value=moment.utc(value).format("YYYY-MM-DD")):"datetime-local"===this.type&&null!==value&&(input.attr("type","datetime-local"),value=moment.utc(value).format("YYYY-MM-DD[T]HH:mm")),"time"===this.type&&null!==value&&(input.attr("type","time"),"object"==typeof value&&(value=moment.utc(value).format("HH:mm:ss"))),"number"===this.type&&$.isNumeric(value)&&this.options&&this.options.DecimalPlaces&&""!==this.options.DecimalPlaces.toString()&&this.options.DecimalPlaces>0&&(value=parseFloat(value).toFixed(this.options.DecimalPlaces)),me.attr("value",value),input.val(value)}}setValueView(value){this.value=value;let input=$(this).find("label");"number"===this.type&&$.isNumeric(value)&&this.options&&this.options.DecimalPlaces&&""!==this.options.DecimalPlaces.toString()&&this.options.DecimalPlaces>0&&null!==value?value=parseFloat(value).toFixed(this.options.DecimalPlaces):"date"===this.type&&null!==value?value=moment.utc(value).locale(flexygo.profiles.culture).format("L"):"datetime-local"===this.type&&null!==value&&(value=moment.utc(value).locale(flexygo.profiles.culture).format("L LT")),input.html(value)}getValue(){let me=$(this);if(me.attr("mode")&&"view"===me.attr("mode").toLowerCase())return this.value;let input=me.find("input");if(""===input.val())return null;if("date"===this.type){var utcDate=moment.utc(input.val());return new Date(Date.UTC(utcDate.year(),utcDate.month(),utcDate.date(),utcDate.hours(),utcDate.minutes(),utcDate.seconds(),utcDate.milliseconds()))}return input.val()}triggerDependencies(){let me,input;(input=(me=$(this)).find("input")).trigger("change")}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-text",flexygo.ui.wc.FlxTextElement);
var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxSwitchElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.options=null,this.property=null,this.value=null,this.moduleName=null}connectedCallback(){let element=$(this);this.connected=!0;let propName=element.attr("property");if(propName&&flexygo.utils.isBlank(this.options)){let parentCtl=element.closest("flx-edit,flx-list,flx-propertymanager,flx-view,flx-filter");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];if(parentCtl.is("flx-filter")){let objName=element.attr("object");this.options=jQuery.extend(!0,{},wcParent.properties[objName+"-"+propName])}else this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=propName}void 0!==element.attr("Disabled")&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Locked=!0);let Style=element.attr("Style");Style&&""!==Style&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=Style,element.attr("Control-Style",this.options.Style),element.attr("Style",""));let Class=element.attr("Class");Class&&""!==Class&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=Class,element.attr("Control-Class",this.options.CssClass),element.attr("Class",""));let ctlClass=element.attr("Control-Class");ctlClass&&""!==ctlClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=ctlClass);let ctlStyle=element.attr("Control-Style");ctlStyle&&""!==ctlStyle&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=ctlStyle);let Hide=element.attr("Hide");if(Hide&&""!==Hide&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide="true"==Hide),this.init(),void 0!==element.attr("checked"))this.setValue(!0);else{let val=element.attr("Value");val&&("true"==val.toLowerCase()||"checked"==val.toLowerCase()||"1"==val?(element.attr("checked","checked"),this.setValue(!0)):"false"!=val.toLowerCase()&&"0"!=val||this.setValue(!1))}}static get observedAttributes(){return["modulename","property","disabled","style","class","hide"]}attributeChangedCallback(attrName,oldVal,newVal){let element=$(this);if(this.connected){if("modulename"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.moduleName=newVal,this.moduleName&&this.refresh(),this.init()),"property"===attrName.toLowerCase()&&newVal&&""!==newVal){let propName=newVal,parentCtl=element.closest("flx-edit, flx-list,flx-propertymanager");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=newVal,this.init()}"disabled"===attrName.toLowerCase()&&(this.options||(this.options=new flexygo.api.ObjectProperty),void 0!==element.attr("disabled")?this.options.Locked=!0:this.options.Locked=!1,element.find("input").prop("disabled",this.options.Locked)),"style"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=newVal,element.attr("Control-Style")!==this.options.Style&&(element.attr("Control-Style",this.options.Style),element.attr("Style",""),this.init())),"class"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=newVal,element.attr("Control-Class")!==this.options.CssClass&&(element.attr("Control-Class",this.options.CssClass),element.attr("Class",""),this.init())),"hide"===attrName.toLowerCase()&&newVal&&""!==newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide=newVal,this.init())}}refresh(){let val=this.getValue();this.init(),val&&""!==val&&this.setValue(val)}init(){this.initEditMode()}initEditMode(){let me=$(this),id=flexygo.utils.uniqueId(),htmlCtl="";htmlCtl+="<div>",htmlCtl+='<div class="onoffswitch">',htmlCtl+='    <input type="checkbox" style="display:none" name="onoffswitch" class="onoffswitch-checkbox" id="'+id+'">',htmlCtl+='    <label class="onoffswitch-label" for="'+id+'">',htmlCtl+='        <span class="onoffswitch-inner"></span>',htmlCtl+='        <span class="onoffswitch-switch"></span>',htmlCtl+="    </label>",htmlCtl+="</div>",htmlCtl+="</div>",me.html(htmlCtl),this.setOptions(),me.find("label:first").on("click",()=>{me.trigger("focusin"),me.trigger("focusout")})}setOptions(){let me=$(this),input=me.find("input");input.on("blur",e=>{me.trigger("blur")}),me.attr("mode")&&"view"===me.attr("mode").toLowerCase()||input.on("change.refreshvalue",e=>{input.prop("checked")?(me.attr("checked","true"),me.attr("value","true")):(me.removeAttr("checked"),me.attr("value","false"))}),this.options&&this.options.Name&&""!==this.options.Name?input.attr("name",this.options.Name):input.attr("name",flexygo.utils.uniqueName()),this.options&&this.options.CauseRefresh&&input.on("change",e=>{let ev={class:"property",type:"changed",sender:this,masterIdentity:this.property};flexygo.events.trigger(ev)}),this.options&&this.options.Locked&&input.prop("disabled",this.options.Locked),me.attr("mode")&&"view"===me.attr("mode").toLowerCase()&&input.prop("disabled",!0),me.attr("tab")&&""!==me.attr("tab")&&input.attr("tabindex",me.attr("tab")),this.options&&this.options.Style&&me.children("div").attr("style",this.options.Style),this.options&&this.options.CssClass&&me.children("div").addClass(this.options.CssClass),this.options&&this.options.Hide&&me.addClass("hideControl")}setValue(value){let me=$(this);"true"==value||"True"==value||"1"==value?value=!0:"false"!=value&&"False"!=value&&"0"!=value||(value=!1),me.find("input").prop("checked",value),me.attr("value",value)}getValue(){let me=$(this);return me.attr("mode")&&"view"===me.attr("mode").toLowerCase()?this.value:me.find("input").prop("checked")}triggerDependencies(){let me,input;(input=(me=$(this)).find("input")).trigger("change")}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-switch",flexygo.ui.wc.FlxSwitchElement);
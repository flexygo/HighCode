var flexygo;!function(flexygo){!function(ui){!function(wc){class FlxRangeMinMax{}wc.FlxRangeElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.options=null,this.type="text",this.property=null,this.value=null}connectedCallback(){let element=$(this);this.type=element.attr("type")||"text",element.removeAttr("type");let propName=element.attr("property");if(propName&&flexygo.utils.isBlank(this.options)){let parentCtl=element.closest("flx-edit, flx-filter,flx-propertymanager");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];if(parentCtl.is("flx-filter")){let objName=element.attr("object");this.options=jQuery.extend(!0,{},wcParent.properties[objName+"-"+propName])}else this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=propName}void 0!==element.attr("Required")&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequired=!0),void 0!==element.attr("Disabled")&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Locked=!0);let RequiredMessage=element.attr("RequiredMessage");RequiredMessage&&""!=RequiredMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequiredMessage=RequiredMessage);let Mask=element.attr("Mask");Mask&&""!=Mask&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Mask=Mask);let Style=element.attr("Style");Style&&""!=Style&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=Style,element.attr("Control-Style",this.options.Style),element.attr("Style",""));let Class=element.attr("Class");Class&&""!=Class&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=Class,element.attr("Control-Class",this.options.CssClass),element.attr("Class",""));let DecimalPlaces=element.attr("DecimalPlaces");DecimalPlaces&&""!=DecimalPlaces&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=parseInt(DecimalPlaces));let MinValue=element.attr("MinValue");MinValue&&""!=MinValue&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValue=MinValue);let MaxValue=element.attr("MaxValue");MaxValue&&""!=MaxValue&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValue=MaxValue);let MaxValueMessage=element.attr("MaxValueMessage");MaxValueMessage&&""!=MaxValueMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValueMessage=MaxValueMessage);let MinValueMessage=element.attr("MinValueMessage");MinValueMessage&&""!=MinValueMessage&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValueMessage=MinValueMessage);let RegExp=element.attr("RegExp");RegExp&&""!=RegExp&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExp=RegExp);let RegExpText=element.attr("RegExpText");RegExpText&&""!=RegExpText&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExpText=RegExpText);let PlaceHolder=element.attr("PlaceHolder");PlaceHolder&&""!=PlaceHolder&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.PlaceHolder=PlaceHolder);let IconClass=element.attr("IconClass");IconClass&&""!=IconClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=IconClass);let HelpId=element.attr("HelpId");HelpId&&""!=HelpId&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=HelpId);let AllowNewFunction=element.attr("AllowNewFunction");AllowNewFunction&&""!=AllowNewFunction&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewFunction=AllowNewFunction);let AllowNewObject=element.attr("AllowNewObject");AllowNewObject&&""!=AllowNewObject&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewObject=AllowNewObject);let ctlClass=element.attr("Control-Class");ctlClass&&""!=ctlClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=ctlClass);let ctlStyle=element.attr("Control-Style");ctlStyle&&""!=ctlStyle&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=ctlStyle),this.init();let Value=element.attr("Value");if(Value&&""!=Value)if(Value.includes("|")){var res=Value.split("|");this.setValue(res[0],res[1])}else this.setValue(Value);this.connected=!0}static get observedAttributes(){return["type","property","required","disabled","requiredmessage","mask","style","class","decimalplaces","minvalue","maxvalue","maxvaluemessage","minvaluemessage","regexp","regexptext","placeholder","iconclass","helpid","allownewfunction","allownewobject"]}attributeChangedCallback(attrName,oldVal,newVal){let element=$(this);if(this.connected){if("type"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.type=newVal,this.refresh()),"property"==attrName.toLowerCase()&&newVal&&""!=newVal){let propName=newVal,parentCtl=element.closest("flx-edit, flx-filter,flx-propertymanager");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];if(parentCtl.is("flx-filter")){let objName=element.attr("object");this.options=jQuery.extend(!0,{},wcParent.properties[objName+"-"+propName])}else this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=newVal,this.refresh()}"required"==attrName.toLowerCase()&&(this.options||(this.options=new flexygo.api.ObjectProperty),void 0!==element.attr("required")?this.options.IsRequired=!0:this.options.IsRequired=!1,element.find("input").prop("required",this.options.IsRequired)),"disabled"==attrName.toLowerCase()&&(this.options||(this.options=new flexygo.api.ObjectProperty),void 0!==element.attr("disabled")?this.options.Locked=!0:this.options.Locked=!1,element.find("input").prop("disabled",this.options.Locked)),"requiredmessage"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IsRequiredMessage=newVal,this.refresh()),"mask"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Mask=newVal,this.refresh()),"style"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=newVal,element.attr("Control-Style")!==this.options.Style&&(element.attr("Control-Style",this.options.Style),element.attr("Style",""),this.refresh())),"class"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=newVal,element.attr("Control-Class")!==this.options.CssClass&&(element.attr("Control-Class",this.options.CssClass),element.attr("Class",""),this.refresh())),"decimalplaces"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=newVal,this.refresh()),"minvalue"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValue=newVal,this.refresh()),"maxvalue"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValue=newVal,this.refresh()),"maxvaluemessage"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MaxValueMessage=newVal,this.refresh()),"minvaluemessage"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.MinValueMessage=newVal,this.refresh()),"regexp"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExp=newVal,this.refresh()),"regexptext"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.RegExpText=newVal,this.refresh()),"placeholder"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.PlaceHolder=newVal,this.refresh()),"iconclass"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=newVal,this.refresh()),"helpid"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=newVal,this.refresh()),"allownewfunction"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewFunction=newVal,this.refresh()),"allownewobject"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.AllowNewObject=newVal,this.refresh())}}refresh(){let val=this.getValue();this.init(),val&&""!=val&&this.setValue(val)}init(){let me=$(this),control=$("<div>");"date"==this.type||"datetime-local"==this.type?("datetime-local"===this.type&&me.closest("flx-module")[0]&&"LoginsAndLocations"===me.closest("flx-module")[0].getAttribute("moduleName")&&(control=$('<div style="width: 300px;">')),this.inputmin=$('<input type="text" onfocus="(this.type=\''+this.type+'\')" class="form-control" />'),this.inputmax=$('<input type="text" onfocus="(this.type=\''+this.type+'\')" class="form-control" />')):(this.inputmin=$('<input type="'+this.type+'" class="form-control" />'),this.inputmax=$('<input type="'+this.type+'" class="form-control" />')),control.append(this.inputmin),control.append(this.inputmax),control.find("input").on("change",ev=>{let input=ev.currentTarget;input.setAttribute("value",input.value)}),me.html(control),this.setOptions()}setOptions(){let me=$(this),input=me.find("input");input.on("change.refreshvalue",()=>{me.attr("value",input.val())}),this.options&&this.options.Name&&""!=this.options.Name?input.attr("name",this.options.Name):input.attr("name",flexygo.utils.uniqueName()),me.attr("tab")&&""!=me.attr("tab")&&input.attr("tabindex",me.attr("tab")),this.options&&this.options.Locked&&input.prop("disabled",this.options.Locked),this.options&&this.options.PlaceHolder&&(this.inputmin.attr("PlaceHolder",this.options.PlaceHolder+" min."),this.inputmax.attr("PlaceHolder",this.options.PlaceHolder+" max.")),this.options&&this.options.Style&&me.children("div").attr("style",this.options.Style),this.options&&this.options.CssClass&&me.children("div").addClass(this.options.CssClass),this.options&&this.options.IsRequired&&input.prop("required",this.options.IsRequired),this.options&&this.options.IsRequiredMessage&&input.attr("data-msg-required",this.options.IsRequiredMessage),this.options&&this.options.Mask&&input.mask(this.options.Mask);const module=me.closest("flx-module")[0];if((this.options&&this.options.CauseRefresh||module&&module.moduleConfig&&module.moduleConfig.PropsEventDependant&&module.moduleConfig.PropsEventDependant.includes(this.property))&&input.on("change",()=>{let ev={class:"property",type:"changed",sender:this,masterIdentity:this.property};flexygo.events.trigger(ev)}),this.options&&this.options.DecimalPlaces&&""!=this.options.DecimalPlaces.toString()&&this.options.DecimalPlaces>0){let step="0.";for(let i=1;i<=this.options.DecimalPlaces;i++)i==this.options.DecimalPlaces?step+="1":step+="0";input.attr("step",step),input.on("change",()=>{this.value=parseFloat(this.value).toFixed(this.options.DecimalPlaces)})}this.options&&this.options.MinValue&&""!=this.options.MinValue.toString()&&input.attr("min",this.options.MinValue),this.options&&this.options.MaxValue&&""!=this.options.MaxValue.toString()&&input.attr("max",this.options.MaxValue),this.options&&this.options.MinValueMessage&&""!=this.options.MinValueMessage&&input.attr("data-msg-min",this.options.MinValueMessage),this.options&&this.options.MaxValueMessage&&""!=this.options.MaxValueMessage&&input.attr("data-msg-max",this.options.MaxValueMessage),this.options&&this.options.RegExp&&""!=this.options.RegExp&&input.attr("regex",this.options.RegExp),this.options&&this.options.RegExpText&&""!=this.options.RegExpText&&input.attr("data-msg-regex",this.options.RegExpText)}setValue(valorMin,valorMax){null==valorMin||""==valorMin?this.inputmin.val(""):"date"==this.type?(this.inputmin.attr("type",this.type),this.inputmin.val(moment(valorMin).format("YYYY-MM-DD"))):"datetime-local"==this.type?(this.inputmin.attr("type",this.type),this.inputmin.val(moment(valorMin).format("YYYY-MM-DD hh:mm"))):this.inputmin.val(valorMin),null==valorMax||""==valorMax?this.inputmax.val(""):"date"==this.type?(this.inputmax.attr("type",this.type),this.inputmax.val(moment(valorMax).format("YYYY-MM-DD"))):"datetime-local"==this.type?(this.inputmax.attr("type",this.type),this.inputmax.val(moment(valorMax).format("YYYY-MM-DD hh:mm"))):this.inputmax.val(valorMax)}getValue(){let value=new FlxRangeMinMax;return value.min=null,value.max=null,""!=this.inputmin.val()&&("date"==this.type?value.min=moment(new Date(this.inputmin.val())).format("YYYY-MM-DD")+" 00:00":value.min=this.inputmin.val()),""!=this.inputmax.val()&&("date"==this.type?value.max=moment(new Date(this.inputmax.val())).format("YYYY-MM-DD")+" 00:00":value.max=this.inputmax.val()),null==value.min&&(value.min=""),null==value.max&&(value.max=""),value.min+"|"+value.max}triggerDependencies(){let me,input;(input=(me=$(this)).find("input")).trigger("change")}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-range",flexygo.ui.wc.FlxRangeElement);
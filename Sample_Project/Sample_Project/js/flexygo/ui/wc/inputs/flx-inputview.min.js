var flexygo;!function(flexygo){!function(ui){!function(wc){wc.FlxInputViewElement=class extends HTMLElement{constructor(){super(),this.connected=!1,this.type=null,this.property=null,this.options=null,this.value=null}connectedCallback(){let element=$(this);this.type=element.attr("type")||"text";let propName=element.attr("property");if(propName&&flexygo.utils.isBlank(this.options)){let parentCtl=element.closest("flx-view");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=propName}let Style=element.attr("Style");Style&&""!=Style&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=Style,element.attr("Control-Style",this.options.Style),element.attr("Style",""));let Class=element.attr("Class");Class&&""!=Class&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=Class,element.attr("Control-Class",this.options.CssClass),element.attr("Class",""));let DecimalPlaces=element.attr("DecimalPlaces");DecimalPlaces&&""!=DecimalPlaces&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=parseInt(DecimalPlaces));let IconClass=element.attr("IconClass");IconClass&&""!=IconClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=IconClass);let HelpId=element.attr("HelpId");HelpId&&""!=HelpId&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=HelpId);let ctlClass=element.attr("Control-Class");ctlClass&&""!=ctlClass&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=ctlClass);let ctlStyle=element.attr("Control-Style");ctlStyle&&""!=ctlStyle&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=ctlStyle);let Hide=element.attr("Hide");Hide&&""!=Hide&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide="true"==Hide),this.init();let Value=element.attr("Value");Value&&""!=Value&&this.setValue(Value),this.connected=!0}static get observedAttributes(){return["property","style","class","decimalplaces","iconclass","helpid","hide"]}attributeChangedCallback(attrName,oldVal,newVal){let element=$(this);if(this.connected){if("property"==attrName.toLowerCase()&&newVal&&""!=newVal){let propName=newVal,parentCtl=element.closest("flx-view");if(parentCtl&&parentCtl.length>0){let wcParent=parentCtl[0];this.options=jQuery.extend(!0,{},wcParent.properties[propName])}this.property=newVal,this.refresh()}"style"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Style=newVal,element.attr("Control-Style")!==this.options.Style&&(element.attr("Control-Style",this.options.Style),element.attr("Style",""),this.refresh())),"class"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.CssClass=newVal,element.attr("Control-Class")!==this.options.CssClass&&(element.attr("Control-Class",this.options.CssClass),element.attr("Class",""),this.refresh())),"decimalplaces"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.DecimalPlaces=newVal,this.refresh()),"iconclass"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.IconClass=newVal,this.refresh()),"helpid"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.HelpId=newVal,this.refresh()),"hide"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.options||(this.options=new flexygo.api.ObjectProperty),this.options.Hide=newVal,this.refresh())}}init(){this.refresh()}refresh(){let iconsLeft,me=$(this);this.options.ControlType&&me.attr("type",this.options.ControlType.toLowerCase());let iconsRight=this.getIconButtons(),control=$("<div>"),input=$('<label class="form-control input-view" />');"separator"==this.options.ControlType.toLowerCase()&&(input=$("<legend/>"),this.options&&this.options.IconClass&&""!=this.options.IconClass&&input.append($('<i class="'+this.options.IconClass+'" />')),input.append(this.options.Label)),"image"==this.options.ControlType.toLowerCase()&&(input=$('<img class="img-responsive"/>'),this.options&&this.options.CssClass&&""!=this.options.CssClass&&input.addClass(this.options.CssClass)),this.options&&this.options.IconClass&&""!=this.options.IconClass&&"separator"!=this.options.ControlType.toLowerCase()&&(iconsLeft=$('<span class="input-group-addon" ><i class="'+this.options.IconClass+'" /></span>')),iconsLeft&&control.append(iconsLeft),control.append(input),iconsRight&&control.append(iconsRight),(iconsLeft||iconsRight)&&control.addClass("input-group"),me.html(control),this.setOptions()}getIconButtons(){let me=$(this),ret=$('<div class="input-group-btn" />'),editCtl=me.closest("flx-view")[0];if(this.options&&this.options.ObjNameLink&&this.options.ObjWhereLink){let icon1=$('<button class="btn btn-default" type="button"><i class="flx-icon icon-link" /></button>').on("click",()=>{flexygo.nav.openPage("view",editCtl.parseEditString(this.options.ObjNameLink),editCtl.parseEditString(this.options.ObjWhereLink),null,this.options.TargetIdLink)});ret.append(icon1)}return""==ret.html()?null:ret}setOptions(){let me=$(this);this.options&&this.options.Style&&me.children("div").attr("style",this.options.Style),this.options&&this.options.CssClass&&me.children("div").addClass(this.options.CssClass),this.options&&this.options.Hide&&me.addClass("hideControl")}setValue(value,text){let me=$(this);this.value=value;let input=me.find("label");if(this.options.ControlType)switch(this.options.ControlType.toLowerCase()){case"check":case"switch":"True"==text&&input.html('<i class="flx-icon icon-checked-1"></i>');break;case"image":(input=me.find("img")).attr("src",text);break;default:input.html(text)}else input.html(text)}getValue(){return"date"==this.options.ControlType?new Date(this.value+" 00:00"):this.value}}}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-inputview",flexygo.ui.wc.FlxInputViewElement);
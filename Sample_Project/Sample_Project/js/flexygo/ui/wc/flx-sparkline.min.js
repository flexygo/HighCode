var flexygo,__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};!function(flexygo){!function(ui){!function(wc){class FlxSparkLineElement extends HTMLElement{constructor(){super(),this.connected=!1,this.moduleName=null,this.options=null,this.data=null}connectedCallback(){let element=$(this);this.connected=!0,this.moduleName=element.attr("modulename"),element.attr("values")&&(this.data=JSON.parse(element.attr("values"))),(this.moduleName||this.data)&&"true"!=element.attr("manualInit")&&this.init()}attributeChangedCallback(attrName,oldVal,newVal){this.connected&&("modulename"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.moduleName=newVal,this.moduleName&&this.refresh()),"values"==attrName.toLowerCase()&&newVal&&""!=newVal&&(this.data=newVal,this.data&&this.refresh()))}refresh(){if("true"!=$(this).attr("manualInit"))return this.init()}init(){return new Promise((resolve,_)=>__awaiter(this,void 0,void 0,function*(){let me=$(this);if(me.removeAttr("manualInit"),$(this).closest("flx-module").find(".flx-noInitContent").remove(),me.html(""),this.moduleName){let params={ObjectName:me.attr("ObjectName"),ObjectWhere:me.attr("ObjectWhere"),ModuleName:this.moduleName,PageName:flexygo.history.getPageName(me)};flexygo.ajax.post("~/api/SparkLine","GetHTML",params,response=>{response&&(this.data=response.Values,this.options=response.Options,this.render()),resolve()},err=>{flexygo.utils.modules.loadingErrorFunction(this.closest("flx-module"),err),resolve()},()=>{this.stopLoading()},()=>{this.startLoading()})}else this.render(),resolve()}))}render(){let me=$(this),options={barColor:"#2db7b0",lineColor:"#2db7b0",performanceColor:"#898686",rangeColors:["#e0e0e0","#c6c6c6","#a9a9a9"]},size=me.attr("size")||"";if(options.type=me.attr("type")||"line",this.options&&""!=this.options){let newOptions=JSON.parse(this.options);for(let key in newOptions)options[key]=newOptions[key]}switch(size){case"l":options.height="100px",options.width="150px",options.barWidth=14,options.barSpacing=4;break;case"m":options.height="50px",options.width="75px",options.barWidth=8,options.barSpacing=2;break;case"s":options.height="20px",options.width="40px";break;default:options.height="auto",options.Width="auto"}me.attr("color")&&""!=me.attr("color")&&(options.barColor=me.attr("Color"),options.lineColor=me.attr("Color")),me.sparkline(this.data,options);let parentModule=me.closest("flx-module"),wcModule=parentModule[0];parentModule&&wcModule&&wcModule.moduleLoaded(this)}flxTranslate(str){return flexygo.localization.translate(str)}startLoading(){$(this).parents("flx-module").length>0&&$(this).parents("flx-module")[0].startLoading()}stopLoading(){$(this).parents("flx-module").length>0&&$(this).parents("flx-module")[0].stopLoading()}}FlxSparkLineElement.observedAttributes=["modulename","values"],wc.FlxSparkLineElement=FlxSparkLineElement}(ui.wc||(ui.wc={}))}(flexygo.ui||(flexygo.ui={}))}(flexygo||(flexygo={})),window.customElements.define("flx-sparkline",flexygo.ui.wc.FlxSparkLineElement);
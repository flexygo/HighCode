var jqCronDefaultSettings={texts:{fr:{empty:'-tout-',name_minute:'minute',name_hour:'heure',name_day:'jour',name_week:'semaine',name_month:'mois',name_year:'annÃ©e',text_period:'Chaque <b />',text_mins:'Ã  <b /> minutes',text_time:'Ã  <b />:<b />',text_dow:'le <b />',text_month:'de <b />',text_dom:'le <b />',error1:'La balise %s n\'est pas supportÃ©e !',error2:'Mauvais nombre d\'Ã©lÃ©ments',error3:'La propriÃ©tÃ© jquery_element doit Ãªtre dÃ©finie dans les paramÃ¨tres jqCron',error4:'Expression non reconnue',weekdays:['lundi','mardi','mercredi','jeudi','vendredi','samedi','dimanche'],months:['janvier','fÃ©vrier','mars','avril','mai','juin','juillet','aoÃ»t','septembre','octobre','novembre','dÃ©cembre']},en:{empty:'-all-',name_minute:'Minute',name_hour:'Hour',name_day:'Day',name_week:'Week',name_month:'Month',name_year:'Year',text_period:'Every <b />',text_mins:'at <b /> minutes past the hour',text_time:'at <b />:<b />',text_dow:'on <b />',text_month:'of <b />',text_dom:'on the <b />',error1:'The tag %s is not supported !',error2:'Bad number of elements',error3:'The jquery_element should be set into jqCron settings',error4:'Unrecognized expression',weekdays:['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'],months:['January','February','March','April','May','June','July','August','September','October','November','December']}},monthdays:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],hours:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],lang:'fr',enabled_minute:!1,enabled_hour:!0,enabled_day:!0,enabled_week:!0,enabled_month:!0,enabled_year:!0,multiple_dom:!1,multiple_month:!1,multiple_mins:!1,multiple_dow:!1,multiple_time_hours:!1,multiple_time_minutes:!1,default_period:'day',default_value:'',no_reset_button:!0,disabled:!1,bind_to:null,bind_method:{set:function($element,value){$element.is(':input')?$element.val(value):$element.data('jqCronValue',value)},get:function($element){return $element.is(':input')?$element.val():$element.data('jqCronValue')}}};(function($){var extend=function(dst,src){for(var i in src){if($.isPlainObject(src[i])){dst[i]=extend(dst[i]&&$.isPlainObject(dst[i])?dst[i]:{},src[i])}else if($.isArray(src[i])){dst[i]=src[i].slice(0)}else if(src[i]!==undefined){dst[i]=src[i]}}
return dst};this.jqCronMergeSettings=function(obj){return extend(extend({},jqCronDefaultSettings),obj||{})}}).call(this,jQuery);(function($){$.fn.jqCronGetInstance=function(){return this.data('jqCron')}}).call(this,jQuery);(function($){$.fn.jqCron=function(settings){return this.each(function(){var cron,saved;var $this=$(this);settings=jqCronMergeSettings(settings);if(!settings.jquery_container){if($this.is(':container')){settings.jquery_element=$this.uniqueId('jqCron')}else if($this.is(':autoclose')){if($this.next('.jqCron').length==1){$this.next('.jqCron').remove()}
settings.jquery_element=$('<span class="jqCron"></span>').uniqueId('jqCron').insertAfter($this)}else{console&&console.error(settings.texts[settings.lang].error1.replace('%s',this.tagName));return}}
if($this.is(':input')){settings.bind_to=settings.bind_to||$this}
if(settings.bind_to){if(settings.bind_to.is(':input')){settings.bind_to.blur(function(){var value=settings.bind_method.get(settings.bind_to);$this.jqCronGetInstance().setCron(value)})}
saved=settings.bind_method.get(settings.bind_to);cron=new jqCron(settings);cron.setCron(saved)}else{cron=new jqCron(settings)}
$(this).data('jqCron',cron)})}}).call(this,jQuery);(function($){var jqCronInstances=[];function jqCron(settings){var _initialized=!1;var _self=this;var _$elt=this;var _$obj=$('<span class="jqCron-container"></span>');var _$blocks=$('<span class="jqCron-blocks"></span>');var _$blockPERIOD=$('<span class="jqCron-period"></span>');var _$blockDOM=$('<span class="jqCron-dom"></span>');var _$blockMONTH=$('<span class="jqCron-month"></span>');var _$blockMINS=$('<span class="jqCron-mins"></span>');var _$blockDOW=$('<span class="jqCron-dow"></span>');var _$blockTIME=$('<span class="jqCron-time"></span>');var _$cross=$('<span class="jqCron-cross">&#10008;</span>');var _selectors=[];var _selectorPeriod,_selectorMins,_selectorTimeH,_selectorTimeM,_selectorDow,_selectorDom,_selectorMonth;function newSelector($block,multiple){var selector=new jqCronSelector(_self,$block,multiple);selector.$.bind('selector:open',function(){for(var n=jqCronInstances.length;n--;){if(jqCronInstances[n]!=_self){jqCronInstances[n].closeSelectors()}else{for(var o=_selectors.length;o--;){if(_selectors[o]!=selector){_selectors[o].close()}}}}});selector.$.bind('selector:change',function(){var boundChanged=!1;if(!_initialized)return;if(settings.multiple_mins==settings.multiple_time_minutes){if(selector==_selectorMins){boundChanged=_selectorTimeM.setValue(_selectorMins.getValue())}else if(selector==_selectorTimeM){boundChanged=_selectorMins.setValue(_selectorTimeM.getValue())}}
boundChanged||_$obj.trigger('cron:change',_self.getCron())});_selectors.push(selector);return selector}
this.disable=function(){_$obj.addClass('disable');settings.disable=!0;_self.closeSelectors()};this.isDisabled=function(){return settings.disable==!0};this.enable=function(){_$obj.removeClass('disable');settings.disable=!1};this.getCron=function(){var period=_selectorPeriod.getValue();var items=['0','*','*','*','*','*'];if(period=='hour'){items[1]=_selectorMins.getCronValue();items[5]='?'}
if(period=='day'||period=='week'||period=='month'||period=='year'){items[1]=_selectorTimeM.getCronValue();items[2]=_selectorTimeH.getCronValue();items[5]='?'}
if(period=='month'||period=='year'){items[3]=_selectorDom.getCronValue();items[5]='?'}
if(period=='year'){items[4]=_selectorMonth.getCronValue();items[5]='?'}
if(period=='week'){items[3]='?';items[5]=_selectorDow.getCronValue()}
return items.join(' ')};this.setCron=function(str){if(!str)return;try{str=str.replace(/\s+/g,' ').replace(/^ +/,'').replace(/ +$/,'');var mask=str.replace(/[^\* ]/g,'-').replace(/-+/g,'-').replace(/ +/g,'');var items=str.split(' ');if(items.length!=5)_self.error(_self.getText('error2'));if(mask=='*****'){_selectorPeriod.setValue('minute')}else if(mask=='-****'){_selectorPeriod.setValue('hour');_selectorMins.setCronValue(items[0]);_selectorTimeM.setCronValue(items[0])}else if(mask.substring(2,mask.length)=='***'){_selectorPeriod.setValue('day');_selectorMins.setCronValue(items[0]);_selectorTimeM.setCronValue(items[0]);_selectorTimeH.setCronValue(items[1])}else if(mask.substring(2,mask.length)=='-**'){_selectorPeriod.setValue('month');_selectorMins.setCronValue(items[0]);_selectorTimeM.setCronValue(items[0]);_selectorTimeH.setCronValue(items[1]);_selectorDom.setCronValue(items[2])}else if(mask.substring(2,mask.length)=='**-'){_selectorPeriod.setValue('week');_selectorMins.setCronValue(items[0]);_selectorTimeM.setCronValue(items[0]);_selectorTimeH.setCronValue(items[1]);_selectorDow.setCronValue(items[4])}else if(mask.substring(3,mask.length)=='-*'){_selectorPeriod.setValue('year');_selectorMins.setCronValue(items[0]);_selectorTimeM.setCronValue(items[0]);_selectorTimeH.setCronValue(items[1]);_selectorDom.setCronValue(items[2]);_selectorMonth.setCronValue(items[3])}else{_self.error(_self.getText('error4'))}
_self.clearError()}catch(e){}};this.closeSelectors=function(){for(var n=_selectors.length;n--;){_selectors[n].close()}};this.getId=function(){return _$elt.attr('id')}
this.getText=function(key){var text=settings.texts[settings.lang][key]||null;if(typeof(text)=="string"&&text.match('<b')){text=text.replace(/(<b *\/>)/gi,'</span><b /><span class="jqCron-text">');text='<span class="jqCron-text">'+text+'</span>'}
return text};this.getHumanText=function(){var texts=[];_$obj.find('> span > span:visible').find('.jqCron-text, .jqCron-selector > span').each(function(){var text=$(this).text().replace(/\s+$/g,'').replace(/^\s+/g,'');text&&texts.push(text)});return texts.join(' ').replace(/\s:\s/g,':')}
this.getSettings=function(){return settings};this.error=function(msg){console&&console.error('[jqCron Error] '+msg);_$obj.addClass('jqCron-error').attr('title',msg);throw msg};this.clearError=function(){_$obj.attr('title','').removeClass('jqCron-error')};this.clear=function(){_selectorDom.setValue([]);_selectorDow.setValue([]);_selectorMins.setValue([]);_selectorMonth.setValue([]);_selectorTimeH.setValue([]);_selectorTimeM.setValue([]);_self.triggerChange()};this.init=function(){var n,i,list;if(_initialized)return;settings=jqCronMergeSettings(settings);settings.jquery_element||_self.error(_self.getText('error3'));_$elt=settings.jquery_element;_$elt.append(_$obj);_$obj.data('id',settings.id);_$obj.data('jqCron',_self);_$obj.append(_$blocks);settings.no_reset_button||_$obj.append(_$cross);(!settings.disable)||_$obj.addClass('disable');_$blocks.append(_$blockPERIOD);_$blocks.append(_$blockDOM);_$blocks.append(_$blockMONTH);_$blocks.append(_$blockMINS);_$blocks.append(_$blockDOW);_$blocks.append(_$blockTIME);_$cross.click(function(){_self.isDisabled()||_self.clear()});_$obj.bind('cron:change',function(evt,value){if(!settings.bind_to)return;settings.bind_method.set&&settings.bind_method.set(settings.bind_to,value);_self.clearError()});_$blockPERIOD.append(_self.getText('text_period'));_selectorPeriod=newSelector(_$blockPERIOD,!1);settings.enabled_minute&&_selectorPeriod.add('minute',_self.getText('name_minute'));settings.enabled_hour&&_selectorPeriod.add('hour',_self.getText('name_hour'));settings.enabled_day&&_selectorPeriod.add('day',_self.getText('name_day'));settings.enabled_week&&_selectorPeriod.add('week',_self.getText('name_week'));settings.enabled_month&&_selectorPeriod.add('month',_self.getText('name_month'));settings.enabled_year&&_selectorPeriod.add('year',_self.getText('name_year'));_selectorPeriod.$.bind('selector:change',function(e,value){_$blockDOM.hide();_$blockMONTH.hide();_$blockMINS.hide();_$blockDOW.hide();_$blockTIME.hide();if(value=='hour'){_$blockMINS.show()}else if(value=='day'){_$blockTIME.show()}else if(value=='week'){_$blockDOW.show();_$blockTIME.show()}else if(value=='month'){_$blockDOM.show();_$blockTIME.show()}else if(value=='year'){_$blockDOM.show();_$blockMONTH.show();_$blockTIME.show()}});_selectorPeriod.setValue(settings.default_period);_$blockMINS.append(_self.getText('text_mins'));_selectorMins=newSelector(_$blockMINS,settings.multiple_mins);for(i=0,list=settings.minutes;i<list.length;i++){_selectorMins.add(list[i],list[i])}
_$blockTIME.append(_self.getText('text_time'));_selectorTimeH=newSelector(_$blockTIME,settings.multiple_time_hours);for(i=0,list=settings.hours;i<list.length;i++){_selectorTimeH.add(list[i],list[i])}
_selectorTimeM=newSelector(_$blockTIME,settings.multiple_time_minutes);for(i=0,list=settings.minutes;i<list.length;i++){_selectorTimeM.add(list[i],list[i])}
_$blockDOW.append(_self.getText('text_dow'));_selectorDow=newSelector(_$blockDOW,settings.multiple_dow);for(i=0,list=_self.getText('weekdays');i<list.length;i++){_selectorDow.add(i+1,list[i])}
_$blockDOM.append(_self.getText('text_dom'));_selectorDom=newSelector(_$blockDOM,settings.multiple_dom);for(i=0,list=settings.monthdays;i<list.length;i++){_selectorDom.add(list[i],list[i])}
_$blockMONTH.append(_self.getText('text_month'));_selectorMonth=newSelector(_$blockMONTH,settings.multiple_month);for(i=0,list=_self.getText('months');i<list.length;i++){_selectorMonth.add(i+1,list[i])}
$('body').click(function(){var i,n=_selectors.length;for(i=0;i<n;i++){_selectors[i].close()}});_initialized=!0;if(settings.default_value){_self.setCron(settings.default_value)}};this.triggerChange=function(){_$obj.trigger('cron:change',_self.getCron())};jqCronInstances.push(this);this.$=_$obj;try{this.init();_self.triggerChange()}catch(e){}}
this.jqCron=jqCron}).call(this,jQuery);(function($){function jqCronSelector(_cron,_$block,_multiple){var _self=this;var _$list=$('<ul class="jqCron-selector-list"></ul>');var _$title=$('<span class="jqCron-selector-title"></span>');var _$selector=$('<span class="jqCron-selector"></span>');var _values={};var _value=[];var _hasNumericTexts=!0;function array_unique(l){var i=0,n=l.length,k={},a=[];while(i<n){k[l[i]]||(k[l[i]]=1&&a.push(l[i]));i++}
return a}
this.getValue=function(){return _multiple?_value:_value[0]};this.getCronValue=function(){if(_value.length==0)return'*';var cron=[_value[0]],i,s=_value[0],c=_value[0],n=_value.length;for(i=1;i<n;i++){if(_value[i]==c+1){c=_value[i];cron[cron.length-1]=s+'-'+c}else{s=c=_value[i];cron.push(c)}}
return cron.join(',')};this.setCronValue=function(str){var values=[],m,i,n=str.length;if(str!=='*'){while(str!=''){m=str.match(/^\*\/([0-9]+),?/);if(m&&m.length==2){for(i=0;i<=59;i+=(m[1]|0)){values.push(i)}
str=str.replace(m[0],'')}
m=str.match(/^([0-9]+)-([0-9]+)\/([0-9]+),?/);if(m&&m.length==4){for(i=(m[1]|0);i<=(m[2]|0);i+=(m[3]|0)){values.push(i)}
str=str.replace(m[0],'')}
m=str.match(/^([0-9]+)-([0-9]+),?/);if(m&&m.length==3){for(i=(m[1]|0);i<=(m[2]|0);i++){values.push(i)}
str=str.replace(m[0],'')}
m=str.match(/^([0-9]+),?/);if(m&&m.length==2){values.push(m[1]|0);str=str.replace(m[0],'')}
if(n==str.length){return}
n=str.length}}
_self.setValue(values)};this.close=function(){_$selector.trigger('selector:close')};this.open=function(){_$selector.trigger('selector:open')};this.isOpened=function(){return _$list.is(':visible')};this.addValue=function(key){var values=_multiple?_value.slice(0):[];values.push(key);_self.setValue(values)};this.removeValue=function(key){if(_multiple){var i,newValue=[];for(i=0;i<_value.length;i++){if(key!=[_value[i]]){newValue.push(_value[i])}}
_self.setValue(newValue)}else{_self.clear()}};this.setValue=function(keys){var i,newKeys=[],saved=_value.join(' ');if(!$.isArray(keys))keys=[keys];_$list.find('li').removeClass('selected');keys=array_unique(keys);keys.sort(function(a,b){var ta=typeof(a);var tb=typeof(b);if(ta==tb&&ta=="number")return a-b;else return String(a)==String(b)?0:(String(a)<String(b)?-1:1)});if(_multiple){for(i=0;i<keys.length;i++){if(keys[i]in _values){_values[keys[i]].addClass('selected');newKeys.push(keys[i])}}}else{if(keys[0]in _values){_values[keys[0]].addClass('selected');newKeys.push(keys[0])}}
_value=newKeys;if(saved!=_value.join(' ')){_$selector.trigger('selector:change',_multiple?keys:keys[0]);return!0}
return!1};this.getTitleText=function(){var getValueText=function(key){return(key in _values)?_values[key].text():key};if(_value.length==0)return _cron.getText('empty');var cron=[getValueText(_value[0])],i,s=_value[0],c=_value[0],n=_value.length;for(i=1;i<n;i++){if(_value[i]==c+1){c=_value[i];cron[cron.length-1]=getValueText(s)+'-'+getValueText(c)}else{s=c=_value[i];cron.push(getValueText(c))}}
return cron.join(',')};this.clear=function(){_values={};_self.setValue([]);_$list.empty()};this.add=function(key,value){var $item=$('<li>'+value+'</li>');if(!(value+'').match(/^[0-9]+$/))_hasNumericTexts=!1;_$list.append($item);_values[key]=$item;$item.click(function(){if(_multiple&&$(this).hasClass('selected')){_self.removeValue(key)}else{_self.addValue(key);if(!_multiple)_self.close()}})};this.$=_$selector;_$block.find('b:eq(0)').after(_$selector).remove();_$selector.addClass('jqCron-selector-'+_$block.find('.jqCron-selector').length).append(_$title).append(_$list).bind('selector:open',function(){if(_hasNumericTexts){var nbcols=1,n=_$list.find('li').length;if(n>5&&n<=16)nbcols=2;else if(n>16&&n<=23)nbcols=3;else if(n>23&&n<=40)nbcols=4;else if(n>40)nbcols=5;_$list.addClass('cols'+nbcols)}
_$list.show()}).bind('selector:close',function(){_$list.hide()}).bind('selector:change',function(){_$title.html(_self.getTitleText())}).click(function(e){e.stopPropagation()}).trigger('selector:change');$.fn.disableSelection&&_$selector.disableSelection();_$title.click(function(e){(_self.isOpened()||_cron.isDisabled())?_self.close():_self.open()});_self.close();_self.clear()}
this.jqCronSelector=jqCronSelector}).call(this,jQuery);(function($){var jqUID=0;var jqGetUID=function(prefix){var id;while(1){jqUID++;id=((prefix||'JQUID')+'')+jqUID;if(!document.getElementById(id))return id}};$.fn.uniqueId=function(prefix){return this.each(function(){if($(this).attr('id'))return;var id=jqGetUID(prefix);$(this).attr('id',id)})}}).call(this,jQuery);(function($){$.extend($.expr[':'],{container:function(a){return(a.tagName+'').toLowerCase()in{a:1,abbr:1,acronym:1,address:1,b:1,big:1,blockquote:1,button:1,cite:1,code:1,dd:1,del:1,dfn:1,div:1,dt:1,em:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,ins:1,kbd:1,label:1,li:1,p:1,pre:1,q:1,samp:1,small:1,span:1,strong:1,sub:1,sup:1,td:1,tt:1}},autoclose:function(a){return(a.tagName+'').toLowerCase()in{area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,link:1,meta:1,param:1}}})}).call(this,jQuery)